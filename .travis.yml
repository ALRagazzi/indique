language: php

php:
  - 7.2

services:
  - mariadb

before_script:
  ## Packages
  - sudo apt-get -qq update > /dev/null
  ## Composer
  - travis_retry composer self-update
  - travis_retry composer install
  - mariadb -e 'CREATE DATABASE indique;'
  - mariadb -u root -e "ALTER USER 'root'@'localhost' IDENTIFIED BY 'datascan';"

script: 
  - ./vendor/bin/phpunit --configuration ./travis.phpunit.xml.dist
  - php vendor/jorgegru/migrate/start init
  - php vendor/jorgegru/migrate/start migrate

notifications:
  email: false